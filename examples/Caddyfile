# Complete GFWReport Plugin Configuration Example
# This example demonstrates all available configuration options

{
	# Order the gfwreport plugin in the middleware chain
	order gfwreport before file_server
}

localhost:8080 {
	# Enable structured logging
	log {
		output file /var/log/caddy/gfwreport.log {
			roll_size 5mb
			roll_keep 5
			roll_keep_for 12h
		}
		format json {
			time_format "iso8601"
		}
		level INFO
	}
	
	# Enable the gfwreport plugin
	gfwreport {
		# Path to the malicious patterns file
		file docker/report.txt
		
		# Hook configuration for threat reporting
		hook {
			# HTTP webhook for remote reporting
			remote http://localhost:9090/webhook
			
			# Shell command for local processing
			exec /usr/local/bin/process-threat.sh
		}
	}
	
	# Enable compression for better performance
	encode gzip
	
	# Serve static files
	file_server {
		root /var/www/html
		index index.html
	}
}
